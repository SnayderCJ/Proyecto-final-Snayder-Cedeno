{% load static %}
<nav id="sidebar" class="fixed inset-y-0 left-0 z-40 flex h-full w-60 -translate-x-full flex-col border-r border-sidebar-border bg-sidebar-bg transition-transform duration-300 ease-in-out md:relative md:translate-x-0 animate-slide-in">
    
    <div class="flex h-24 flex-shrink-0 items-center justify-center px-6 animate-fade-in">
        <img src="{% static 'img/Logo2.png' %}" alt="Logo StudyFly" class="h-14 hover-scale">
    </div>

    <div class="flex-grow overflow-y-auto p-4 space-y-1">
        <a href="{% url 'core:home' %}" 
           class="sidebar-link flex items-center gap-4 rounded-md px-4 py-3 text-sidebar-muted smooth-transition hover:text-foreground hover-glow {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
            <i class="fa-solid fa-grip text-lg"></i>
            <span>Dashboard</span>
        </a>
        <a href="{% url 'planner:horarios' %}" 
           class="sidebar-link flex items-center gap-4 rounded-md px-4 py-3 text-sidebar-muted smooth-transition hover:text-foreground hover-glow {% if request.resolver_match.url_name == 'horarios' %}active{% endif %}">
            <i class="fa-solid fa-calendar text-lg"></i>
            <span>Horarios</span>
        </a>
        <a href="{% url 'planner:tareas' %}" 
           class="sidebar-link flex items-center gap-4 rounded-md px-4 py-3 text-sidebar-muted smooth-transition hover:text-foreground hover-glow {% if request.resolver_match.url_name == 'tareas' %}active{% endif %}">
            <i class="fa-solid fa-list-check text-lg"></i>
            <span>Tareas</span>
        </a>
        <a href="{% url 'planner:productividad' %}" 
           class="sidebar-link flex items-center gap-4 rounded-md px-4 py-3 text-sidebar-muted smooth-transition hover:text-foreground hover-glow {% if request.resolver_match.url_name == 'productividad' %}active{% endif %}">
            <i class="fa-solid fa-chart-simple text-lg"></i>
            <span>Productividad</span>
        </a>
        <a href="{% url 'planner:focused_time' %}" 
           class="sidebar-link flex items-center gap-4 rounded-md px-4 py-3 text-sidebar-muted smooth-transition hover:text-foreground hover-glow {% if request.resolver_match.url_name == 'focused_time' %}active{% endif %}">
            <i class="fa-solid fa-clock text-lg"></i>
            <span>Tiempo de Enfoque</span>
        </a>
    </div>

    <div class="flex-shrink-0 border-t border-sidebar-border p-4 animate-slide-up">
        <div class="flex items-center justify-between">
            <a href="{% url 'core:perfil' %}" class="flex min-w-0 items-center gap-3 smooth-transition hover-scale">
                <img class="h-10 w-10 flex-shrink-0 rounded-full object-cover smooth-transition"
                     src="{% if user_avatar|default:'' %}{{ user_avatar }}{% else %}{% static 'images/default-avatar.png' %}{% endif %}" 
                     alt="Avatar de {{ user_display_name|default:'Usuario' }}"
                     onerror="this.src='https://ui-avatars.com/api/?name={{ user_display_name|default:'Usuario' }}&background=a855f7&color=fff&size=150';">
            
                <div class="min-w-0">
                    <p class="truncate text-sm font-semibold text-foreground">{{ user_display_name|default:'Usuario' }}</p>
                    </a>
                    <a href="{% url 'core:settings' %}" class="flex-1 smooth-transition hover-scale">
                    <p class="truncate text-xs text-muted-foreground">Configuración</p>
                    </a>
                </div>
            
            <a href="{% url 'accounts:logout' %}" class="flex-shrink-0 rounded-md p-2 text-muted-foreground smooth-transition hover:text-foreground animate-pulse-hover" title="Cerrar Sesión">
                <i class="fa-solid fa-right-from-bracket"></i>
            </a>
        </div>
    </div>
</nav>
